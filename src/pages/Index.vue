<template>
  <q-page padding>
    <div class="row justify-center">
      <div class="col-12 col-sm-7 q-px-md">
        <h4 class=" text-bold">–ù–∞–π–¥–∏—Ç–µ <span class="text-secondary">—Å–æ–∂–∏—Ç–µ–ª—è</span> –ø–æ –æ–¥–Ω–æ–º—É –∫–ª–∏–∫—É üòÉ</h4>
        <q-select
          @input="findCity"
          :options="options"
          outlined
          v-model="city"
          use-input
          transition-show="jump-up"
          transition-hide="jump-up"
          @filter="filterFn"
          clearable
          label="–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥">
          <template v-slot:before>
            <q-icon name="place"/>
          </template>

          <template v-slot:append>
            <q-icon name="search"/>
          </template>
        </q-select>

        <q-separator style="margin-top: 30px"/>
        <Cities/>
      </div>
    </div>
  </q-page>
</template>

<script>
import Cities from 'components/PopularCities'

const stringOptions = ['–ù—É—Ä-–°—É–ª—Ç–∞–Ω', '–ê–ª–º–∞—Ç—ã', '–®—ã–º–∫–µ–Ω—Ç', '–ö–∞—Ä–∞–≥–∞–Ω–¥–∞', '–ê–∫—Ç–∞—É', '–ê—Ç—ã—Ä–∞—É', '–ê–∫—Ç–æ–±–µ', '–°–µ–º–µ–π', '–£—Å—Ç—å-–ö–∞–º–µ–Ω–æ–≥–æ—Ä—Å–∫', '–¢–∞—Ä–∞–∑', '–ö–æ—Å—Ç–∞–Ω–∞–π', ' –ö—ã–∑—ã–ª–æ—Ä–¥–∞', '–ü–∞–≤–ª–æ–¥–∞—Ä', '–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫']
export default {
  name: 'PageIndex',
  components: {
    Cities
  },
  data () {
    return {
      city: null,
      options: stringOptions
    }
  },
  methods: {
    filterFn (val, update, abort) {
      update(() => {
        const needle = val.toLowerCase()
        // eslint-disable-next-line no-undef
        this.options = stringOptions.filter(v => v.toLowerCase().indexOf(needle) > -1)
      })
    },
    findCity (val) {
      this.$router.push(`/search/${this.city}`)
    }
  }
}
</script>
